# =============================================================================
# Environment Configuration for Qwen2 Image Generation Docker Setup
# =============================================================================
# Copy this file to .env and customize the values for your environment
# =============================================================================

# =============================================================================
# General Configuration
# =============================================================================
COMPOSE_PROJECT_NAME=qwen2
COMPOSE_FILE=docker-compose.yml
NODE_ENV=development

# =============================================================================
# Domain Configuration
# =============================================================================
# Development domains (use .localhost for local development)
FRONTEND_DOMAIN=qwen.localhost
API_DOMAIN=api.localhost
TRAEFIK_DOMAIN=traefik.localhost

# Production domains (replace with your actual domains)
# FRONTEND_DOMAIN=yourdomain.com
# API_DOMAIN=api.yourdomain.com
# TRAEFIK_DOMAIN=dashboard.yourdomain.com

# =============================================================================
# SSL/TLS Configuration
# =============================================================================
# Let's Encrypt email for SSL certificates (production only)
LETSENCRYPT_EMAIL=your-email@yourdomain.com

# SSL certificate resolver (letsencrypt for production, selfsigned for dev)
CERT_RESOLVER=letsencrypt

# =============================================================================
# GPU Configuration
# =============================================================================
# GPU device selection (0 for first GPU, all for all GPUs)
CUDA_VISIBLE_DEVICES=0
NVIDIA_VISIBLE_DEVICES=all
NVIDIA_DRIVER_CAPABILITIES=compute,utility

# Enable GPU support
ENABLE_GPU=true

# =============================================================================
# API Server Configuration
# =============================================================================
# API server settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1
API_TIMEOUT=300
MAX_REQUEST_SIZE=100MB

# Feature flags
ENABLE_DIFFSYNTH=true
ENABLE_CONTROLNET=true
ENABLE_QWEN_EDIT=true
ENABLE_QWEN_IMAGE=true

# Performance settings
MEMORY_OPTIMIZATION=true
TILED_PROCESSING_THRESHOLD=2048
MAX_BATCH_SIZE=4
ATTENTION_OPTIMIZATION=true

# Cache settings
CACHE_TTL=3600
MODEL_CACHE_SIZE=8GB
ENABLE_REDIS_CACHE=false

# =============================================================================
# Frontend Configuration
# =============================================================================
# React app settings
REACT_APP_API_URL=/api
REACT_APP_WS_URL=/ws
GENERATE_SOURCEMAP=false
BUILD_OPTIMIZATION=true

# =============================================================================
# Database Configuration (Optional)
# =============================================================================
# PostgreSQL settings (if using database profile)
POSTGRES_DB=qwen_dev
POSTGRES_USER=qwen
POSTGRES_PASSWORD=qwen_dev_password
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# =============================================================================
# Redis Configuration
# =============================================================================
# Redis settings
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=qwen_redis_password_change_in_production
REDIS_MAX_MEMORY=1gb

# =============================================================================
# Security Configuration
# =============================================================================
# CORS settings
CORS_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true

# Security flags
SECURE_COOKIES=false
HTTPS_ONLY=false
DEBUG=true

# Authentication (change in production)
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin

# =============================================================================
# Logging Configuration
# =============================================================================
# Log levels: DEBUG, INFO, WARN, ERROR
LOG_LEVEL=INFO
LOG_FORMAT=json
ACCESS_LOG=true

# Log file settings
LOG_MAX_SIZE=100m
LOG_MAX_FILES=5
LOG_COMPRESS=true

# =============================================================================
# Monitoring Configuration
# =============================================================================
# Prometheus settings
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_RETENTION_SIZE=10GB

# Grafana settings
GRAFANA_ADMIN_PASSWORD=secure_admin_password
GRAFANA_ALLOW_SIGN_UP=false

# =============================================================================
# Resource Limits
# =============================================================================
# API server resources
API_MEMORY_LIMIT=16G
API_CPU_LIMIT=8.0
API_REPLICAS=1

# Frontend resources
FRONTEND_MEMORY_LIMIT=512m
FRONTEND_CPU_LIMIT=1.0
FRONTEND_REPLICAS=1

# Redis resources
REDIS_MEMORY_LIMIT=1G
REDIS_CPU_LIMIT=1.0

# =============================================================================
# Volume Configuration
# =============================================================================
# Data directories (relative to project root)
MODELS_DIR=./models
CACHE_DIR=./cache
GENERATED_IMAGES_DIR=./generated_images
UPLOADS_DIR=./uploads
OFFLOAD_DIR=./offload
LOGS_DIR=./logs

# =============================================================================
# Development Configuration
# =============================================================================
# Development-specific settings
HOT_RELOAD=true
CHOKIDAR_USEPOLLING=true
WATCHPACK_POLLING=true
FAST_REFRESH=true

# Development ports (for direct access)
DEV_API_PORT=8000
DEV_FRONTEND_PORT=3000
DEV_REDIS_PORT=6379
DEV_POSTGRES_PORT=5432

# =============================================================================
# Email Configuration (Development)
# =============================================================================
# Mailhog settings (development email testing)
MAILHOG_SMTP_PORT=1025
MAILHOG_WEB_PORT=8025

# =============================================================================
# Backup Configuration
# =============================================================================
# Backup settings
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=./backups

# =============================================================================
# Custom Configuration
# =============================================================================
# Add your custom environment variables here
# CUSTOM_VAR=value